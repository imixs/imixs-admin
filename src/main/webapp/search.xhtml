<ui:composition template="/WEB-INF/templates/layout.xhtml"
	xmlns:faces="jakarta.faces" xmlns:f="jakarta.faces.core"
	xmlns:h="jakarta.faces.html" xmlns:ui="jakarta.faces.facelets"
	xmlns:pt="jakarta.faces.passthrough">

	<ui:define name="content">


		<f:view>


			<h:form id="search_form_id">
				<div class="card">

					<h2>
						<span class="typcn typcn-zoom-outline"></span> Search Query <span
							class="tooltip "
							style="margin-left: 10px; font-size: 1.2rem; color: #2a6496;">
							<span class="typcn typcn-lightbulb"></span> <span class="tip">To
								search for documents you can either use the <i>Lucene Search
									Query</i> syntax or you can use the <i>Java Persistence Query
									Language</i>. Find more on www.imixs.org
						</span>
						</span>
					</h2>


					<div class="imixs-form-section">
						<dl style="grid-column-start: span 12;">
							<dd>
								<h:inputTextarea value="#{searchController.query}"
									pt:spellcheck="false" style="width: 100%;height: 7em;"
									disabled="#{!connectionController.connected}" required="true" />
							</dd>
						</dl>
					</div>



					<div class="imixs-form-section">
						<dl style="grid-column-start: span 2;">
							<dt>Page Size:</dt>
							<dd>
								<h:inputText value="#{searchController.pageSize}"
									style="width: 7em;" />
							</dd>
						</dl>
						<dl style="grid-column-start: span 2;">
							<dt>Page Index:</dt>
							<dd>
								<h:inputText value="#{searchController.pageIndex}"
									style="width: 7em;" />
							</dd>
						</dl>

						<dl style="grid-column-start: span 4;">
							<dt>Sort By:</dt>
							<dd>
								<h:inputText value="#{searchController.sortBy}" />
							</dd>
						</dl>

						<dl style="grid-column-start: span 4;">
							<dt>Sort Order:</dt>
							<dd>
								<select name="sortOrder" id="sortOrder">
									<option value="DESC">Descanding</option>
									<option value="ASC">Ascanding</option>
								</select>
							</dd>
						</dl>



						<h:commandButton value="Search"
							actionListener="#{searchController.search()}"
							disabled="#{!connectionController.connected}" />
					</div>
				</div>


				<!-- Search Result -->
				<div class="card">
					<h2>
						<span class="typcn typcn-world-outline"></span> Search Result <span
							class="pull-right"> <a><span
								class="typcn typcn-media-rewind"></span></a> <span
							class="typcn typcn-media-rewind-outline"></span> <a><span
								class="typcn typcn-media-fast-forward"></span></a>
						</span>
					</h2>
					<table id="imixsdatatable" class="imixsdatatable"
						style="width: 100%;">
						<thead>
							<tr>
								<th>UUID</th>
								<th>Created</th>
								<th>Modified</th>
								<th>Type</th>
								<th>Workflow Status</th>
								<th>Workflow Summary</th>
								<th></th>
							</tr>
						</thead>
						<tbody>

							<ui:repeat var="doc" value="#{searchController.searchResult}">
								<tr>
									<td style="white-space: nowrap;"><h:link
											outcome="/document.xhtml?cid=#{jakarta.enterprise.context.conversation.id}">
											<label>#{doc.uniqueID}</label>
											<f:param name="id" value="#{doc.uniqueID}" />
										</h:link></td>
									<td style="white-space: nowrap;">#{doc.item['$created']}</td>
									<td style="white-space: nowrap;">#{doc.item['$modified']}</td>
									<td style="white-space: nowrap;">#{doc.item['type']}</td>
									<td style="white-space: nowrap;">#{doc.item['$workflowstatus']}</td>
									<td style="white-space: nowrap;">#{doc.item['$workflowsummary']}</td>
									<td><a><span
											class="typcn typcn-trash pull-right error"></span></a></td>
								</tr>
							</ui:repeat>
						</tbody>
					</table>
				</div>


			</h:form>
		</f:view>


	</ui:define>
</ui:composition>
